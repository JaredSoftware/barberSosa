import{_ as D}from"./DaIHgnVo.js";import{r as g,g as j,u as z,c as i,a as e,h as y,b as B,w as L,d as f,i as a,F as U,j as S,s as v,t as d,v as p,x,D as $,o as n,n as q}from"./DubxvCNo.js";import{u as F}from"./B7Hvwl0c.js";import{u as G}from"./Dk9IIhO2.js";import"./DxZUp_Ia.js";import"./DD9xvv_g.js";import"./CFgllcZz.js";const I={class:"min-h-screen bg-background-deep py-8 px-4"},O={class:"max-w-7xl mx-auto"},T={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8"},H={key:0,class:"text-center py-12"},P={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},J={class:"absolute top-4 right-4"},K={class:"text-center mb-4"},Q={class:"material-symbols-outlined text-primary text-5xl"},R={class:"text-white text-xl font-display font-bold uppercase tracking-widest mb-2 text-center"},W={class:"text-gray-500 text-xs text-center mb-4"},X={class:"flex gap-2"},Y=["onClick"],Z=["onClick"],ee={key:2,class:"text-center py-12 bg-charcoal border border-primary/20 rounded-sm"},te={class:"bg-charcoal border border-primary/20 rounded-sm p-8 max-w-md w-full"},re={class:"text-white text-2xl font-display font-bold uppercase tracking-widest mb-6"},ae={key:0,class:"mt-2 flex items-center gap-2"},oe={class:"material-symbols-outlined text-primary text-3xl"},se={class:"flex items-center gap-2"},ie={class:"flex gap-4 pt-4"},ne={type:"submit",class:"flex-1 bg-gold-gradient text-background-deep font-black uppercase tracking-[0.2em] py-3 px-6 rounded-sm hover:brightness-110 transition-all shadow-lg"},be={__name:"categories",setup(le){const{isAuthenticated:k}=F(),{categories:b,loading:w,fetchCategories:u,createCategory:h,updateCategory:C,deleteCategory:_}=G(),c=g(!1),l=g(null),o=g({name:"",icon:"category",order:0,active:!0});j(async()=>{k.value&&await u(!1)});const E=s=>{l.value=s,o.value={name:s.name,icon:s.icon,order:s.order||0,active:s.active!==!1},c.value=!0},m=()=>{c.value=!1,l.value=null,o.value={name:"",icon:"category",order:0,active:!0}},V=async()=>{try{const s={name:o.value.name.trim(),icon:o.value.icon.trim(),order:Number(o.value.order),active:o.value.active!==!1};l.value?await C(l.value._id,s):await h(s),m(),await u(!1)}catch(s){console.error("Error guardando categoría:",s),alert("Error al guardar: "+(s.message||"Error desconocido"))}},N=async s=>{if(confirm("¿Eliminar esta categoría? Los productos con esta categoría no se eliminarán."))try{await _(s),await u(!1)}catch(t){console.error("Error eliminando categoría:",t),alert("Error al eliminar: "+(t.message||"Error desconocido"))}};return z({title:"Gestionar Categorías - Admin Panel"}),(s,t)=>{const M=D;return n(),i("div",I,[e("div",O,[e("div",T,[e("div",null,[B(M,{to:"/admin",class:"text-gray-400 hover:text-primary text-sm mb-2 inline-block transition-colors"},{default:L(()=>t[5]||(t[5]=[f(" ← Volver al Dashboard ")])),_:1,__:[5]}),t[6]||(t[6]=e("h1",{class:"text-white text-3xl sm:text-4xl font-display font-bold uppercase tracking-widest"}," Gestionar Categorías ",-1))]),e("button",{onClick:t[0]||(t[0]=r=>c.value=!0),class:"bg-gold-gradient text-background-deep font-black uppercase tracking-[0.2em] py-3 px-6 rounded-sm hover:brightness-110 transition-all shadow-lg flex items-center gap-2"},t[7]||(t[7]=[e("span",{class:"material-symbols-outlined"},"add",-1),f(" Nueva Categoría ")]))]),a(w)?(n(),i("div",H,t[8]||(t[8]=[e("p",{class:"text-gray-400"},"Cargando categorías...",-1)]))):a(b).length>0?(n(),i("div",P,[(n(!0),i(U,null,S(a(b),r=>(n(),i("div",{key:r._id,class:"bg-charcoal border border-primary/20 rounded-sm p-6 hover:border-primary/40 transition-all group relative"},[e("div",J,[e("span",{class:q([r.active?"bg-green-600":"bg-gray-600","text-xs px-2 py-1 rounded text-white"])},d(r.active?"Activa":"Inactiva"),3)]),e("div",K,[e("span",Q,d(r.icon),1)]),e("h3",R,d(r.name),1),e("p",W,"Orden: "+d(r.order||0),1),e("div",X,[e("button",{onClick:A=>E(r),class:"flex-1 bg-primary/20 hover:bg-primary/30 text-primary font-bold py-2 px-4 rounded-sm transition-all text-sm uppercase tracking-wider"}," Editar ",8,Y),e("button",{onClick:A=>N(r._id),class:"flex-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 font-bold py-2 px-4 rounded-sm transition-all text-sm uppercase tracking-wider"}," Eliminar ",8,Z)])]))),128))])):(n(),i("div",ee,t[9]||(t[9]=[e("p",{class:"text-gray-400"},"No hay categorías. Crea una para organizar tus productos.",-1)]))),a(c)||a(l)?(n(),i("div",{key:3,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:v(m,["self"])},[e("div",te,[e("h2",re,d(a(l)?"Editar Categoría":"Nueva Categoría"),1),e("form",{onSubmit:v(V,["prevent"]),class:"space-y-4"},[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"},"Nombre *",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>a(o).name=r),type:"text",required:"",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"Ej: Barba"},null,512),[[x,a(o).name]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," Icono (Material Symbols) * ",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a(o).icon=r),type:"text",required:"",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"face"},null,512),[[x,a(o).icon]]),t[13]||(t[13]=e("div",{class:"flex items-center gap-2 mt-1"},[e("a",{href:"https://fonts.google.com/icons",target:"_blank",class:"text-primary hover:text-gold text-xs underline"}," Ver iconos disponibles ")],-1)),a(o).icon?(n(),i("div",ae,[t[11]||(t[11]=e("span",{class:"text-gray-400 text-xs"},"Vista previa:",-1)),e("span",oe,d(a(o).icon),1)])):y("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"},"Orden",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a(o).order=r),type:"number",min:"0",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"0"},null,512),[[x,a(o).order,void 0,{number:!0}]]),t[15]||(t[15]=e("p",{class:"text-gray-500 text-xs mt-1"},"Las categorías se ordenan de menor a mayor",-1))]),e("div",se,[p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a(o).active=r),type:"checkbox",id:"active",class:"rounded border-primary/20 bg-background-deep text-primary focus:ring-primary"},null,512),[[$,a(o).active]]),t[16]||(t[16]=e("label",{for:"active",class:"text-gray-400 text-sm uppercase tracking-wider"},"Categoría visible",-1))]),e("div",ie,[e("button",ne,d(a(l)?"Actualizar":"Crear"),1),e("button",{type:"button",onClick:m,class:"flex-1 bg-background-deep border border-primary/20 text-gray-400 hover:text-white font-bold py-3 px-6 rounded-sm transition-all uppercase tracking-wider"}," Cancelar ")])],32)])])):y("",!0)])])}}};export{be as default};
