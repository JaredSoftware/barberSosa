import{_ as $}from"./DaIHgnVo.js";import{e as O,r as y,g as I,p as q,u as L,c as o,a as e,k as T,h as u,b as B,w as G,d as x,i as a,F as v,j as f,s as j,t as n,v as c,x as m,z as F,D as S,o as l,n as M}from"./DubxvCNo.js";import{u as H}from"./B7Hvwl0c.js";import{u as J}from"./BYVTsSkL.js";import"./DxZUp_Ia.js";import"./DD9xvv_g.js";import"./CFgllcZz.js";const K={class:"min-h-screen bg-background-deep py-8 px-4"},Q={class:"max-w-7xl mx-auto"},W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},X={key:0,class:"text-center py-12"},Y={key:1,class:"space-y-10 mb-8"},Z={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ee={class:"absolute top-4 right-4 flex flex-col gap-1 items-end"},te={class:"mb-4"},se={class:"flex items-center gap-4 mb-3"},re={key:0,class:"text-primary text-4xl"},ae={class:"material-symbols-outlined"},ie={key:1,class:"w-12 h-12"},oe=["src","alt"],le={class:"text-white text-xl font-display font-bold uppercase tracking-widest mb-2"},ne={class:"text-gray-400 text-sm leading-relaxed mb-4"},de={class:"flex items-baseline justify-between mb-4 pb-4 border-b border-primary/10"},ce={class:"text-primary font-bold text-2xl"},pe={class:"text-gray-500 text-xs uppercase tracking-widest"},ue={key:0,class:"mb-4"},me={class:"text-gray-500 text-xs space-y-1"},ge={class:"flex gap-2 mt-4"},xe=["onClick"],be=["onClick"],ye={key:1,class:"text-center py-8 bg-charcoal/50 border border-primary/10 border-dashed rounded-sm"},ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},fe={class:"absolute top-4 right-4"},ke={class:"mb-4"},we={class:"flex items-center gap-4 mb-3"},he={key:0,class:"text-primary text-4xl"},_e={class:"material-symbols-outlined"},Ce={key:1,class:"w-12 h-12"},Ee=["src","alt"],Ve={class:"text-white text-xl font-display font-bold uppercase tracking-widest mb-2"},Ne={class:"text-gray-400 text-sm leading-relaxed mb-4"},Oe={class:"flex items-baseline justify-between mb-4 pb-4 border-b border-primary/10"},je={class:"text-primary font-bold text-2xl"},Se={class:"text-gray-500 text-xs uppercase tracking-widest"},Me={key:0,class:"mb-4"},Ue={class:"text-gray-500 text-xs space-y-1"},De={class:"flex gap-2 mt-4"},Ae=["onClick"],Pe=["onClick"],ze={key:1,class:"text-center py-8 bg-charcoal/50 border border-white/10 border-dashed rounded-sm"},Re={key:2,class:"text-center py-12 bg-charcoal border border-primary/20 rounded-sm"},$e={class:"bg-charcoal border border-primary/20 rounded-sm p-8 max-w-md w-full max-h-[90vh] overflow-y-auto"},Ie={class:"text-white text-2xl font-display font-bold uppercase tracking-widest mb-6"},qe={class:"grid grid-cols-2 gap-4"},Le={key:0,class:"mt-2 flex items-center gap-2"},Te={class:"material-symbols-outlined text-primary text-2xl"},Be={class:"flex items-center gap-2"},Ge={class:"flex items-center gap-2"},Fe={class:"flex gap-4 pt-4"},He={type:"submit",class:"flex-1 bg-gold-gradient text-background-deep font-black uppercase tracking-[0.2em] py-3 px-6 rounded-sm hover:brightness-110 transition-all shadow-lg"},tt={__name:"offers",setup(Je){const{isAuthenticated:U}=H(),{offers:k,loading:_,fetchOffers:w,createOffer:D,updateOffer:A,deleteOffer:P}=J(),C=O(()=>(k.value||[]).filter(i=>i.premium===!0)),E=O(()=>(k.value||[]).filter(i=>!i.premium)),b=y(!1),p=y(null),r=y({title:"",description:"",price:0,duration:0,icon:"",image:"",active:!0,premium:!1,features:[]}),g=y("");I(async()=>{U.value&&await w(!1)}),q(g,i=>{r.value.features=i.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)});const V=i=>{p.value=i,r.value={title:i.title,description:i.description,price:i.price,duration:i.duration,icon:i.icon||"",image:i.image||"",active:i.active!==!1,premium:i.premium===!0,features:i.features||[]},g.value=(i.features||[]).join(`
`),b.value=!0},h=()=>{b.value=!1,p.value=null,r.value={title:"",description:"",price:0,duration:0,icon:"",image:"",active:!0,premium:!1,features:[]},g.value=""},z=async()=>{try{const i={title:r.value.title.trim(),description:r.value.description.trim(),price:Number(r.value.price),duration:Number(r.value.duration),active:r.value.active!==!1,premium:r.value.premium===!0,icon:(r.value.icon??"").trim(),image:(r.value.image??"").trim(),features:Array.isArray(r.value.features)?r.value.features:[]};if(console.log("ğŸ’¾ Guardando oferta:",i),console.log("ğŸ“‹ formData.premium original:",r.value.premium),console.log("âœ… premium enviado al backend:",i.premium),p.value){const t=await A(p.value._id,i);console.log("âœ… Oferta actualizada desde el backend:",t)}else{const t=await D(i);console.log("âœ… Oferta creada desde el backend:",t)}h(),await w(!1)}catch(i){console.error("âŒ Error guardando oferta:",i);const t=i.message||"Error desconocido";alert("Error al guardar la oferta: "+t)}},N=async i=>{if(confirm("Â¿EstÃ¡s seguro de eliminar esta oferta? Esta acciÃ³n no se puede deshacer."))try{await P(i),await w(!1)}catch(t){console.error("Error eliminando oferta:",t),alert("Error al eliminar la oferta: "+(t.message||"Error desconocido"))}};return L({title:"Gestionar ofertas (servicios) - Admin"}),(i,t)=>{const R=$;return l(),o("div",K,[e("div",Q,[e("div",W,[e("div",null,[B(R,{to:"/admin",class:"text-gray-400 hover:text-primary text-sm mb-2 inline-block transition-colors"},{default:G(()=>t[10]||(t[10]=[x(" â† Volver al Dashboard ")])),_:1,__:[10]}),t[11]||(t[11]=e("h1",{class:"text-white text-3xl sm:text-4xl font-display font-bold uppercase tracking-widest"}," Gestionar ofertas (servicios) ",-1))]),e("button",{onClick:t[0]||(t[0]=s=>b.value=!0),class:"bg-gold-gradient text-background-deep font-black uppercase tracking-[0.2em] py-3 px-6 rounded-sm hover:brightness-110 transition-all shadow-lg flex items-center gap-2"},t[12]||(t[12]=[e("span",{class:"material-symbols-outlined"},"add",-1),x(" Nueva oferta ")]))]),t[35]||(t[35]=T('<div class="bg-charcoal/80 border border-primary/20 rounded-sm p-4 sm:p-5 mb-8 text-sm"><p class="text-gray-300 mb-2"><strong class="text-white">Una sola lista de ofertas.</strong> Cada oferta puede ser <strong class="text-primary">Premium</strong> o <strong class="text-gray-400">estÃ¡ndar</strong>. La diferencia es solo dÃ³nde se muestran en la pÃ¡gina de reservas: </p><ul class="text-gray-400 space-y-1 list-disc list-inside"><li><strong class="text-primary">Premium</strong> â†’ aparecen en el bloque Â«Reservas PremiumÂ» (grid de 3 columnas).</li><li><strong class="text-gray-400">EstÃ¡ndar</strong> â†’ aparecen en Â«Selecciona ServiciosÂ» (tarjetas grandes).</li></ul><p class="text-gray-500 mt-3 text-xs">Al crear o editar una oferta, marca o desmarca Â«Reserva premiumÂ» para cambiar el tipo.</p></div>',1)),a(_)?(l(),o("div",X,t[13]||(t[13]=[e("p",{class:"text-gray-400"},"Cargando ofertas...",-1)]))):(l(),o("div",Y,[e("section",null,[t[17]||(t[17]=e("h2",{class:"text-white text-lg font-display font-bold uppercase tracking-widest mb-1 flex items-center gap-2"},[e("span",{class:"material-symbols-outlined text-primary text-2xl"},"star"),x(" Reservas Premium ")],-1)),t[18]||(t[18]=e("p",{class:"text-gray-500 text-xs mb-4"},"Se muestran en el grid destacado de la pÃ¡gina de reservas.",-1)),a(C).length>0?(l(),o("div",Z,[(l(!0),o(v,null,f(a(C),s=>(l(),o("div",{key:s._id,class:"bg-charcoal border border-primary/30 rounded-sm p-6 hover:border-primary/50 transition-all group relative overflow-hidden"},[e("div",ee,[e("span",{class:M([s.active?"bg-green-600":"bg-gray-600","text-xs px-2 py-1 rounded text-white"])},n(s.active?"Activa":"Inactiva"),3),t[14]||(t[14]=e("span",{class:"text-xs px-2 py-1 rounded bg-primary/90 text-black font-bold uppercase flex items-center gap-1"},[e("span",{class:"material-symbols-outlined text-sm"},"star"),x(" Premium ")],-1))]),e("div",te,[e("div",se,[s.icon?(l(),o("div",re,[e("span",ae,n(s.icon),1)])):s.image?(l(),o("div",ie,[e("img",{src:s.image,alt:s.title,class:"w-full h-full object-contain"},null,8,oe)])):u("",!0)]),e("h3",le,n(s.title),1),e("p",ne,n(s.description),1)]),e("div",de,[e("span",ce,"$"+n(s.price),1),e("span",pe,n(s.duration)+" MIN",1)]),s.features&&s.features.length>0?(l(),o("div",ue,[e("ul",me,[(l(!0),o(v,null,f(s.features,d=>(l(),o("li",{key:d,class:"flex items-center gap-2"},[t[15]||(t[15]=e("span",{class:"text-primary"},"â€¢",-1)),e("span",null,n(d),1)]))),128))])])):u("",!0),e("div",ge,[e("button",{onClick:d=>V(s),class:"flex-1 bg-primary/20 hover:bg-primary/30 text-primary font-bold py-2 px-4 rounded-sm transition-all text-sm uppercase tracking-wider"}," Editar ",8,xe),e("button",{onClick:d=>N(s._id),class:"flex-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 font-bold py-2 px-4 rounded-sm transition-all text-sm uppercase tracking-wider"}," Eliminar ",8,be)])]))),128))])):(l(),o("div",ye,t[16]||(t[16]=[e("p",{class:"text-gray-500 text-sm"},"Ninguna oferta marcada como premium. Edita una oferta y activa Â«Reserva premiumÂ».",-1)])))]),e("section",null,[t[21]||(t[21]=e("h2",{class:"text-white text-lg font-display font-bold uppercase tracking-widest mb-1 flex items-center gap-2"},[e("span",{class:"material-symbols-outlined text-gray-500 text-2xl"},"content_cut"),x(" Servicios estÃ¡ndar ")],-1)),t[22]||(t[22]=e("p",{class:"text-gray-500 text-xs mb-4"},"Se muestran en las tarjetas de Â«Selecciona ServiciosÂ» en la pÃ¡gina de reservas.",-1)),a(E).length>0?(l(),o("div",ve,[(l(!0),o(v,null,f(a(E),s=>(l(),o("div",{key:s._id,class:"bg-charcoal border border-white/10 rounded-sm p-6 hover:border-primary/30 transition-all group relative overflow-hidden"},[e("div",fe,[e("span",{class:M([s.active?"bg-green-600":"bg-gray-600","text-xs px-2 py-1 rounded text-white"])},n(s.active?"Activa":"Inactiva"),3)]),e("div",ke,[e("div",we,[s.icon?(l(),o("div",he,[e("span",_e,n(s.icon),1)])):s.image?(l(),o("div",Ce,[e("img",{src:s.image,alt:s.title,class:"w-full h-full object-contain"},null,8,Ee)])):u("",!0)]),e("h3",Ve,n(s.title),1),e("p",Ne,n(s.description),1)]),e("div",Oe,[e("span",je,"$"+n(s.price),1),e("span",Se,n(s.duration)+" MIN",1)]),s.features&&s.features.length>0?(l(),o("div",Me,[e("ul",Ue,[(l(!0),o(v,null,f(s.features,d=>(l(),o("li",{key:d,class:"flex items-center gap-2"},[t[19]||(t[19]=e("span",{class:"text-primary"},"â€¢",-1)),e("span",null,n(d),1)]))),128))])])):u("",!0),e("div",De,[e("button",{onClick:d=>V(s),class:"flex-1 bg-primary/20 hover:bg-primary/30 text-primary font-bold py-2 px-4 rounded-sm transition-all text-sm uppercase tracking-wider"}," Editar ",8,Ae),e("button",{onClick:d=>N(s._id),class:"flex-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 font-bold py-2 px-4 rounded-sm transition-all text-sm uppercase tracking-wider"}," Eliminar ",8,Pe)])]))),128))])):(l(),o("div",ze,t[20]||(t[20]=[e("p",{class:"text-gray-500 text-sm"},"Ninguna oferta estÃ¡ndar. Todas estÃ¡n como premium o no hay ofertas.",-1)])))])])),!a(_)&&a(k).length===0?(l(),o("div",Re,t[23]||(t[23]=[e("p",{class:"text-gray-400"},"No hay ofertas. Crea una nueva oferta para comenzar.",-1)]))):u("",!0),a(b)||a(p)?(l(),o("div",{key:3,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:j(h,["self"])},[e("div",$e,[e("h2",Ie,n(a(p)?"Editar Oferta":"Nueva Oferta"),1),e("form",{onSubmit:j(z,["prevent"]),class:"space-y-4"},[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," TÃ­tulo * ",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a(r).title=s),type:"text",required:"",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"Ej: Corte Premium"},null,512),[[m,a(r).title]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," DescripciÃ³n * ",-1)),c(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(r).description=s),required:"",rows:"3",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors resize-none",placeholder:"DescripciÃ³n detallada del servicio"},null,512),[[m,a(r).description]])]),e("div",qe,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," Precio * ",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a(r).price=s),type:"number",step:"0.01",min:"0",required:"",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"0.00"},null,512),[[m,a(r).price,void 0,{number:!0}]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," DuraciÃ³n (min) * ",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a(r).duration=s),type:"number",min:"1",required:"",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"30"},null,512),[[m,a(r).duration,void 0,{number:!0}]])])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," Icono (Material Symbols) ",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a(r).icon=s),type:"text",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"content_cut"},null,512),[[m,a(r).icon]]),t[30]||(t[30]=e("div",{class:"flex items-center gap-2 mt-1"},[e("p",{class:"text-gray-500 text-xs"}," Nombre del icono de Material Symbols (opcional) "),e("a",{href:"https://fonts.google.com/icons",target:"_blank",rel:"noopener noreferrer",class:"text-primary hover:text-gold text-xs underline flex items-center gap-1",title:"Buscar iconos disponibles"},[e("span",{class:"material-symbols-outlined !text-sm"},"open_in_new"),x(" Ver iconos disponibles ")])],-1)),a(r).icon?(l(),o("div",Le,[t[28]||(t[28]=e("span",{class:"text-gray-400 text-xs"},"Vista previa:",-1)),e("span",Te,n(a(r).icon),1)])):u("",!0)]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider"}," URL de Imagen ",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>a(r).image=s),type:"url",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors",placeholder:"https://ejemplo.com/imagen.jpg"},null,512),[[m,a(r).image]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-gray-400 text-sm font-medium mb-2 uppercase tracking-wider mb-3"}," CaracterÃ­sticas (una por lÃ­nea) ",-1)),c(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>F(g)?g.value=s:null),rows:"4",class:"w-full bg-background-deep border border-primary/20 text-white rounded-sm px-4 py-3 focus:outline-none focus:border-primary transition-colors resize-none",placeholder:`Corte profesional
Lavado incluido
Productos premium`},null,512),[[m,a(g)]])]),e("div",Be,[c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a(r).active=s),type:"checkbox",id:"active",class:"rounded border-primary/20 bg-background-deep text-primary focus:ring-primary"},null,512),[[S,a(r).active]]),t[33]||(t[33]=e("label",{for:"active",class:"text-gray-400 text-sm uppercase tracking-wider"}," Oferta activa ",-1))]),e("div",Ge,[c(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a(r).premium=s),type:"checkbox",id:"premium",class:"rounded border-primary/20 bg-background-deep text-primary focus:ring-primary"},null,512),[[S,a(r).premium]]),t[34]||(t[34]=e("label",{for:"premium",class:"text-gray-400 text-sm uppercase tracking-wider"}," Reserva premium (aparece en la secciÃ³n Premium en reservas) ",-1))]),e("div",Fe,[e("button",He,n(a(p)?"Actualizar":"Crear"),1),e("button",{type:"button",onClick:h,class:"flex-1 bg-background-deep border border-primary/20 text-gray-400 hover:text-white font-bold py-3 px-6 rounded-sm transition-all uppercase tracking-wider"}," Cancelar ")])],32)])])):u("",!0)])])}}};export{tt as default};
