import{_ as z}from"./DaIHgnVo.js";import{u as F,r as f,e as u,g as q,c as r,a as s,b as R,w as U,t as i,i as o,F as p,j as y,h as N,v as H,y as O,z as Q,o as d,d as E,n as x,s as G}from"./DubxvCNo.js";import{u as J}from"./wmd5FtzM.js";import{u as K}from"./DbmS-_H1.js";import{u as W}from"./Dk9IIhO2.js";import{u as X}from"./CFgllcZz.js";import{u as Y}from"./DD9xvv_g.js";import{_ as Z}from"./DlAUqK2U.js";import"./DxZUp_Ia.js";const ee={class:"flex flex-1 justify-center py-8 sm:py-10 md:py-12 bg-deeper-gray"},te={class:"layout-content-container flex flex-col max-w-[1280px] w-full px-4 sm:px-6 lg:px-20"},se={class:"flex items-center gap-2 pb-8 text-[10px] font-bold uppercase tracking-[0.2em]"},ae={class:"text-gold"},oe={class:"flex flex-col lg:flex-row gap-6 sm:gap-8 md:gap-12"},le={class:"w-full lg:w-64 shrink-0"},ie={class:"flex flex-col gap-6 sm:gap-8 md:gap-10 sticky top-24 sm:top-28 md:top-32"},ne={class:"text-gold font-display text-sm font-bold uppercase mb-6 tracking-widest"},re={class:"flex flex-col gap-1"},de=["onClick"],ce={class:"flex items-center gap-3"},ge={class:"flex-1"},me={class:"flex flex-col md:flex-row md:items-end justify-between mb-6 sm:mb-8 md:mb-10 gap-4 pb-4 sm:pb-6"},xe={class:"text-gray-500 text-[10px] sm:text-xs font-bold uppercase tracking-[0.3em] mb-2"},fe={class:"text-white text-2xl sm:text-3xl md:text-4xl font-display font-bold uppercase tracking-wide"},_e={class:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4"},be={class:"text-[10px] text-gray-500 uppercase font-black tracking-widest"},ve={value:"popular"},ue={value:"newest"},he={value:"price-asc"},pe={value:"price-desc"},ye={key:0,class:"text-center py-12 text-gray-400"},we={key:1,class:"text-center py-12 text-gray-500"},ke={key:2,class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6"},Ce={class:"h-72 w-full bg-accent-gray mb-6 relative overflow-hidden"},Pe=["alt","src"],je={class:"flex flex-col flex-1"},Ne={class:"text-gray-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2"},Ee={class:"text-gold font-display text-xl font-bold uppercase mb-3 leading-tight group-hover:text-white transition-colors"},Be={class:"text-xs text-gray-500 mb-6 leading-relaxed font-light"},$e={class:"mt-auto flex items-center justify-between pt-6 border-t border-gold/10"},De={class:"text-white text-lg font-bold font-display"},Ie=["onClick","disabled"],Le={key:0,class:"material-symbols-outlined text-sm animate-spin"},Te={key:1,class:"material-symbols-outlined text-sm"},Ae={key:2,class:"material-symbols-outlined text-sm"},Me={key:3,class:"flex items-center justify-center gap-4 mt-16"},Se=["onClick"],w=6,Ve={__name:"catalogo",setup(ze){const{t:B}=J(),n=B;F({title:`Sosa Barber | ${n("catalog.title")}`,meta:[{name:"viewport",content:"width=device-width, initial-scale=1.0"}]});const{products:k,loading:$,fetchProducts:D}=K(),{categories:I,fetchCategories:L}=W(),C=f(""),g=f(null),_=f("popular"),m=f(1),b=u(()=>{const a=k.value||[];return(I.value||[]).map(t=>({id:t._id,name:t.name,icon:t.icon,count:a.filter(l=>l.category===t.name).length}))});q(async()=>{await Promise.all([D(!0),L(!0)]),b.value.length>0&&!g.value&&(g.value=b.value[0].id)});const P=u(()=>{let a=[...k.value||[]];if(g.value){const t=b.value.find(l=>l.id===g.value);t&&(a=a.filter(l=>l.category===t.name))}if(C.value){const t=C.value.toLowerCase();a=a.filter(l=>l.name.toLowerCase().includes(t)||(l.description||"").toLowerCase().includes(t))}switch(_.value){case"price-asc":a.sort((t,l)=>Number(t.price)-Number(l.price));break;case"price-desc":a.sort((t,l)=>Number(l.price)-Number(t.price));break;case"newest":a.sort((t,l)=>new Date(l.createdAt||0)-new Date(t.createdAt||0));break}return a}),h=u(()=>Math.max(1,Math.ceil(P.value.length/w))),j=u(()=>{const a=(m.value-1)*w;return P.value.slice(a,a+w)}),{addToCart:T}=X(),c=f({}),A=Y("cart_drawer_open",()=>!1),M=async a=>{const t=(a==null?void 0:a.id)??(a==null?void 0:a._id);if(!t){console.error("Producto sin id:",a);return}c.value[t]="adding";try{await T(t,1),c.value[t]="added",setTimeout(()=>{c.value[t]="idle"},2e3),A.value=!0}catch(l){console.error("Error aÃ±adiendo al carrito:",l),c.value[t]="error",setTimeout(()=>{c.value[t]="idle"},3e3)}},S=a=>{const t=(a==null?void 0:a.id)??(a==null?void 0:a._id),l=c.value[t]||"idle";return n(l==="adding"?"catalog.adding":l==="added"?"catalog.added":l==="error"?"catalog.error":"catalog.addToCart")},V=a=>{const t=(a==null?void 0:a.id)??(a==null?void 0:a._id);return c.value[t]==="adding"};return(a,t)=>{const l=z;return d(),r("div",ee,[s("div",te,[s("div",se,[R(l,{to:"/",class:"text-gray-500 hover:text-gold transition-colors"},{default:U(()=>[E(i(o(n)("nav.home")),1)]),_:1}),t[4]||(t[4]=s("span",{class:"text-gray-700"},"/",-1)),s("span",ae,i(o(n)("catalog.breadcrumb")),1)]),s("div",oe,[s("aside",le,[s("div",ie,[s("section",null,[s("h3",ne,i(o(n)("catalog.categories")),1),s("div",re,[(d(!0),r(p,null,y(o(b),e=>(d(),r("div",{key:e.id,onClick:v=>{g.value=e.id,m.value=1},class:x(["flex items-center justify-between px-4 py-3 cursor-pointer font-bold uppercase text-xs tracking-wider transition-all",o(g)===e.id?"bg-gold/20 border-l-4 border-gold text-gold":"hover:bg-accent-gray text-gray-400 hover:text-gold border-l-4 border-transparent"])},[s("div",ce,[s("span",{class:x(["material-symbols-outlined text-lg",o(g)===e.id?"text-gold":""])},i(e.icon),3),s("span",null,i(e.name),1)]),s("span",{class:x(["text-[10px]",o(g)===e.id?"text-gold":"text-gray-500"])},i(e.count),3)],10,de))),128))])])])]),s("div",ge,[s("div",me,[s("div",null,[s("h2",xe,i(o(n)("catalog.exquisiteCollection")),1),s("h1",fe,i(o(n)("catalog.careEssentials")),1)]),s("div",_e,[s("span",be,i(o(n)("catalog.sortBy")),1),H(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>Q(_)?_.value=e:null),class:"bg-dark-gray text-gold border border-gold/20 rounded-none text-xs font-bold uppercase py-2 pl-3 pr-10 focus:ring-1 focus:ring-gold appearance-none cursor-pointer w-full sm:w-auto"},[s("option",ve,i(o(n)("catalog.mostPopular")),1),s("option",ue,i(o(n)("catalog.newest")),1),s("option",he,i(o(n)("catalog.priceAsc")),1),s("option",pe,i(o(n)("catalog.priceDesc")),1)],512),[[O,o(_)]])])]),o($)?(d(),r("div",ye,i(o(n)("catalog.loading")),1)):o(j).length===0?(d(),r("div",we,i(o(n)("catalog.empty")),1)):(d(),r("div",ke,[(d(!0),r(p,null,y(o(j),e=>(d(),r("div",{key:e._id,class:"product-card bg-dark-gray p-6 flex flex-col group"},[s("div",Ce,[s("img",{alt:e.name,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 grayscale hover:grayscale-0",src:e.image||"/placeholder-product.png",onError:t[1]||(t[1]=v=>v.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect fill='%23333' width='400' height='400'/%3E%3Ctext fill='%23666' x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='18'%3E"+encodeURIComponent(o(n)("catalog.noImage"))+"%3C/text%3E%3C/svg%3E")},null,40,Pe),e.badge?(d(),r("div",{key:0,class:x(["absolute top-0 right-0 text-black text-[9px] font-black px-3 py-1 uppercase tracking-widest",e.badge==="Premium"?"bg-gold":"bg-accent-gray text-gold border-r border-b border-gold/20"])},i(e.badge),3)):N("",!0)]),s("div",je,[s("p",Ne,i(e.category),1),s("h3",Ee,i(e.name),1),s("p",Be,i(e.description),1),s("div",$e,[s("span",De,"$"+i(Number(e.price).toFixed(2)),1),s("button",{onClick:G(v=>M(e),["prevent"]),disabled:V(e),class:x(["px-4 py-2 text-[10px] font-black uppercase tracking-widest transition-colors flex items-center gap-2",o(c)[(e==null?void 0:e.id)??(e==null?void 0:e._id)]==="added"?"bg-green-600 text-white":o(c)[(e==null?void 0:e.id)??(e==null?void 0:e._id)]==="error"?"bg-red-900/80 text-white":"bg-gold hover:bg-gold-dark text-black"])},[o(c)[(e==null?void 0:e.id)??(e==null?void 0:e._id)]==="adding"?(d(),r("span",Le," progress_activity ")):o(c)[(e==null?void 0:e.id)??(e==null?void 0:e._id)]==="added"?(d(),r("span",Te," check ")):(d(),r("span",Ae," add_shopping_cart ")),E(" "+i(S(e)),1)],10,Ie)])])]))),128))])),o(h)>1?(d(),r("div",Me,[s("button",{onClick:t[2]||(t[2]=e=>o(m)>1&&m.value--),class:"w-10 h-10 flex items-center justify-center border border-gold/20 hover:border-gold text-gold transition-colors"},t[5]||(t[5]=[s("span",{class:"material-symbols-outlined"},"chevron_left",-1)])),(d(!0),r(p,null,y(o(h),e=>(d(),r("button",{key:e,onClick:v=>m.value=e,class:x(["w-10 h-10 flex items-center justify-center font-bold transition-colors",o(m)===e?"bg-gold text-black":"border border-gold/20 hover:border-gold text-gold"])},i(e),11,Se))),128)),s("button",{onClick:t[3]||(t[3]=e=>o(m)<o(h)&&m.value++),class:"w-10 h-10 flex items-center justify-center border border-gold/20 hover:border-gold text-gold transition-colors"},t[6]||(t[6]=[s("span",{class:"material-symbols-outlined"},"chevron_right",-1)]))])):N("",!0)])])])])}}},Ke=Z(Ve,[["__scopeId","data-v-c57d3ff8"]]);export{Ke as default};
